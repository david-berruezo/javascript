<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rotation Matrix Sample</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        #output {
            font-size: 1em;
            position: absolute;
        }
    </style>

</head>
<body>
<canvas id="canvas"></canvas>
<script>
    var canvas  = document.getElementById('canvas');
    var context = canvas.getContext('2d');
    var m = rotatePoint(5,10,Math.PI/4);
    // window.output.innerHTML += JSON.stringify(m);
    var x = 0;
    var y = 0;
    var angle = 0;
    var vuelta = 0;
    var contadorGrados = 0;
    canvas.height = window.innerHeight;
    canvas.width  = window.innerWidth;
    function rotatePoint(x,y,angle) {
        var newX = x * Math.cos(angle) - y * Math.sin(angle);
        var newY = x * Math.sin(angle) + y * Math.cos(angle);
        /*
        var cos = Math.cos(angle),
            sin = Math.sin(angle),
            x1 = ball.xpos * cos - ball.zpos * sin,
            z1 = ball.zpos * cos + ball.xpos * sin;
        ball.xpos = x1;
        ball.zpos = z1;
        */
        return [newX, newY];
    };
    draw();
    function draw() {
        //angle += 0.1;
        context.beginPath();
        context.lineWidth = 1;
        context.moveTo(canvas.width * 0.5, canvas.height * 0.5)
        var p = rotatePoint(100,100,angle);
        context.lineTo(p[0] + canvas.width * 0.5, p[1] + canvas.height * 0.5);
        context.strokeStyle = "#ff0000";
        context.stroke();
        /*
        if (contadorGrados + 1 > 62){
            contadorGrados = 1;
            vuelta = 1;

        }else{
            contadorGrados = contadorGrados + 1;
        }
        */
        if (angle >= Math.PI*2){
            vuelta = 1;
        }

        console.log("contadorGrados: "+contadorGrados)
        if (vuelta == 0){
            angle += 0.05;
        }else{
            angle = 0;
        }
        requestAnimationFrame(draw);
    };
</script>
</body>
</html>