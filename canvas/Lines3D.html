<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Lines 3d 2</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<canvas id="canvas" width="400" height="400"></canvas>
<script src="Librerias/utils/utils.js"></script>
<script src="Librerias/utils/Point3D.js"></script>
<script>
window.onload = function () {
	
	var canvas = document.getElementById('canvas'),
	context = canvas.getContext('2d'),
	mouse = captureMouse(canvas),
	points = [],
	numPoints = 50,
	fl = 250,
	vpX = canvas.width / 2,
	vpY = canvas.height / 2,
	angleX, angleY; //referenced in drawFrame and move
	
	/*
	for (var point, i = 0; i < numPoints; i++) {
		
		point = new Point3d(Math.random() * 200 - 100, Math.random() * 200 - 100, Math.random() * 200 - 100);
		point.setVanishingPoint(vpX, vpY);
		points.push(point);
	}
	*/
	
	points[0] = new Point3d(-100, -100, 100);
	points[0].setVanishingPoint(0, 100);
	points[1] = new Point3d( 100, -100, 100);
	points[1].setVanishingPoint(0, 100);
	points[2] = new Point3d( 100, 100, 100);
	points[2].setVanishingPoint(0, 100);
	points[3] = new Point3d(-100, 100, 100);
	points[3].setVanishingPoint(0, 100);
	
	
	function move (point) {
		
		point.rotateX(angleX);
		point.rotateY(angleY);
	
	}
	
	function draw (point, i) {
	
	//ignore first point
	if (i !== 0) {
		context.lineTo(point.getScreenX(), point.getScreenY());
	}
	}
	(function drawFrame () {
		window.requestAnimationFrame(drawFrame, canvas);
		context.clearRect(0, 0, canvas.width, canvas.height);
		angleX = (mouse.y - vpY) * 0.001;
		angleY = (mouse.x - vpX) * 0.001;
		points.forEach(move);
		context.beginPath();
		//line starts at first point
		context.moveTo(points[0].getScreenX(), points[0].getScreenY());
		points.forEach(draw);
		context.stroke();
	}());
};
</script>
</body>
</html>