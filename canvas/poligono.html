<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Poligono</title>
    <style>
        body{ background-color: ivory; }
        #canvas{border:1px solid red;}
    </style>
</head>
<body>
<h4>Draw a gold line segment over the given side
    <br>Draw a purple dot at the given segment's midpoint
    <br>Draw a green apothem line segment at 90 degrees from the midpoint
    <br>Draw a red dot at the end of the apothem (==centerpoint)
</h4>
<canvas id="canvas" width=300 height=300></canvas>

<script>
window.onload=function(){
var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");
var cw=canvas.width;
var ch=canvas.height;

// testing: get the vertices of a regular polygon
var points=regularPolygonPoints(cw/2,ch/2,7,75);
// draw the polygon
drawPoints(points,5,'black');
// draw a dot at the actual centerpoint of the polygon
// (we want to hit this centerpoint with our getCenter() function)
dot(cw/2,ch/2,'blue',8);

// some utilities
var PI=Math.PI;
var deg2rad=function(d){return(d*PI/180);}
// Given sidecount and starting+ending points of one side
var sidecount=7;
var p0=points[0];
var p1=points[1];

// ask getCenter to calc the centerpoint
var center=getCenter(sidecount,p0,p1);

//
function getCenter(sidecount,p0,p1){
var dx=p1.x-p0.x;
var dy=p1.y-p0.y;
var sidelength=Math.sqrt(dx*dx+dy*dy);
var sideangle=Math.atan2(dy,dx);
var apothemAngle=sideangle+PI/2;
var apothem=sidelength/(2*Math.tan(deg2rad(180/sidecount)));
var midX=(p0.x+p1.x)/2;
var midY=(p0.y+p1.y)/2;
var cx=midX+apothem*Math.cos(apothemAngle);
var cy=midY+apothem*Math.sin(apothemAngle);

// testing
// draw a gold line segment over the given side
// draw a purple dot at the given segment's midpoint
// draw a green apothem line segment at 90 degrees from the midpoint
// draw a red dot at the end of the apothem (==centerpoint)
//
// side line segment from p0 to p1
ctx.beginPath();
ctx.moveTo(p0.x,p0.y);
ctx.lineTo(p1.x,p1.y);
ctx.lineWidth=3;
ctx.strokeStyle='gold';
ctx.stroke();
// midpoint
dot(midX,midY,'purple',7);
// apothem line segment
ctx.beginPath();
ctx.moveTo(midX,midY);
ctx.lineTo(cx,cy);
ctx.lineWidth=3;
ctx.strokeStyle='green';
ctx.stroke();
// calculated centerpoint
dot(cx,cy,'red',4);

// return the centerpoint
return({x:cx,y:cy});
}

function dot(x,y,color,r){
ctx.beginPath();
ctx.arc(x,y,r,0,Math.PI*2);
ctx.closePath();
ctx.fillStyle=color;
ctx.fill();
}

function drawPoints(points,linewidth,strokestyle){
ctx.beginPath();
ctx.moveTo(points[0].x,points[0].y);
for(var i=1;i<points.length;i++){
ctx.lineTo(points[i].x,points[i].y);
}
ctx.closePath();
ctx.lineWidth=linewidth
ctx.strokeStyle=strokestyle;
ctx.stroke();
}

function regularPolygonPoints(cx,cy,sideCount,radius){
var sweep=Math.PI*2/sideCount;
var points=[];
for(var i=0;i<sideCount;i++){
var x=cx+radius*Math.cos(i*sweep);
var y=cy+radius*Math.sin(i*sweep);
points.push({x:x

,y:y});
}
return(points);
}
}
</script>
</body>
</html>